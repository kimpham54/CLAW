<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Hacking on Islandora - Islandora CLAW</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Islandora CLAW">
    <meta property="og:image" content="None/../../assets/claw.png">
    <meta name="apple-mobile-web-app-title" content="Islandora CLAW">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="../../assets/claw.png">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-a422ff04cc.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700|Roboto+Mono">
      <style>
        body, input {
          font-family: 'Roboto', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-red palette-accent-red">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Contributing <i class="icon icon-link"></i>
              
            
          </span>
        
        Hacking on Islandora
      </div>
    </div>
    
      
      <div class="button button-twitter" role="button" aria-label="Twitter">
        <a href="https://twitter.com/islandora" title="@islandora on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
      </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/kimpham54/CLAW" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../assets/claw.png">
        </div>
      
      <div class="name">
        <strong>
          Islandora CLAW
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          kimpham54/CLAW
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/kimpham54/CLAW/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/kimpham54/CLAW/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <span class="section">User Documentation</span>
    <ul>
      
        
  <li>
    <a class="" title="Introduction to Islandora CLAW" href="../../user-documentation/intro-to-claw/">
      Introduction to Islandora CLAW
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Islandora CLAW for 1.x Users" href="../../user-documentation/CLAWfor1x/">
      Islandora CLAW for 1.x Users
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Technical Documentation</span>
    <ul>
      
        
  <li>
    <a class="" title="Minimum Viable Product" href="../../mvp/mvp_doc/">
      Minimum Viable Product
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How to build documenation" href="../../technical-documentation/docs-build/">
      How to build documenation
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Syncing Drupal Project" href="../../technical-documentation/drupal-project/">
      Syncing Drupal Project
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Versioning Policy" href="../../technical-documentation/versioning/">
      Versioning Policy
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Alpaca Technical Stack" href="../../alpaca/alpaca-technical-stack/">
      Alpaca Technical Stack
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Components</span>
    <ul>
      
        
  <li>
    <a class="" title="Islandora CLAW" href="../..">
      Islandora CLAW
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Alpaca" href="../../alpaca/README/">
      Alpaca
    </a>
    
  </li>

      
        
  <li>
    <span class="section">Drupal modules</span>
    <ul>
      
        
  <li>
    <a class="" title="Islandora" href="../../islandora/README/">
      Islandora
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Islandora Collection" href="../../islandora_collection/README/">
      Islandora Collection
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Islandora Image" href="../../islandora_image/README/">
      Islandora Image
    </a>
    
  </li>

      
    </ul>
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Installation</span>
    <ul>
      
        
  <li>
    <a class="" title="Installation (Vagrant)" href="../../install/README/">
      Installation (Vagrant)
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Contributing</span>
    <ul>
      
        
  <li>
    <a class="" title="How to contribute" href="../CONTRIBUTING/">
      How to contribute
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Committers" href="../committers/">
      Committers
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Hacking on Islandora" href="./">
      Hacking on Islandora
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Logging in to your development environment" href="#logging-in-to-your-development-environment">
                Logging in to your development environment
              </a>
            </li>
          
            <li class="anchor">
              <a title="Port Forwarding" href="#port-forwarding">
                Port Forwarding
              </a>
            </li>
          
            <li class="anchor">
              <a title="Important locations" href="#important-locations">
                Important locations
              </a>
            </li>
          
            <li class="anchor">
              <a title="Shared folders" href="#shared-folders">
                Shared folders
              </a>
            </li>
          
            <li class="anchor">
              <a title="Compiling Camel Bundles" href="#compiling-camel-bundles">
                Compiling Camel Bundles
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Migration</span>
    <ul>
      
        
  <li>
    <a class="" title="Migration" href="../../migration/migration/">
      Migration
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Fedora namespace predicates" href="../../migration/fedora-namespace-predicates/">
      Fedora namespace predicates
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Islandora namespace predicates" href="../../migration/islandora-namespace-predicates/">
      Islandora namespace predicates
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
          <hr>
          <span class="section">The author</span>
          <ul>
            
              
              <li>
                <a href="https://twitter.com/islandora" target="_blank" title="@islandora on Twitter">
                  @islandora on Twitter
                </a>
              </li>
            
            
          </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="hacking-on-islandora-claw">Hacking on Islandora CLAW</h1>
<p>One of the goals of the Islandora CLAW project is to lower the barrier to entry for working on and with Islandora. A shared, consistent environment amongst developers is one of the best ways to do this. To get started hacking on Islandora CLAW with your very own development environment, all you need to do follow these steps:</p>
<ol>
<li>Install <a href="https://www.virtualbox.org/">VirtualBox</a></li>
<li>Install <a href="https://www.vagrantup.com/">Vagrant</a></li>
<li>Fork <a href="https://github.com/Islandora-CLAW/CLAW">Islandora CLAW</a> and clone it onto your machine using the master branch</li>
</ol>
<pre><code class="bash">~ $ git clone -b master https://github.com/your_github_name/islandora.git
</code></pre>

<p>OR
If you're already a developer and have previously forked and cloned Islandora CLAW, just add the master branch from Islandora-CLAW to your existing checkout:</p>
<pre><code class="bash">~ $ cd /path/to/islandora
/path/to/CLAW $ git remote add claw https://github.com/Islandora-CLAW/CLAW.git
/path/to/CLAW $ git fetch claw
/path/to/CLAW $ git checkout master
</code></pre>

<ol>
<li>Navigate into the <code>install</code> directory of your master checkout</li>
</ol>
<pre><code class="bash">~ $ cd /path/to/CLAW/install
</code></pre>

<ol>
<li>Build your vm using <code>vagrant up</code></li>
</ol>
<pre><code class="bash">/path/to/CLAW/install $ vagrant up
</code></pre>

<p>Sit back and relax as your development environment is created for you! In a few minutes you’ll have a brand new Islandora CLAW install that you can use and abuse as much as you’d like. If you ever ruin your environment (trust me, it’ll happen), you can always destroy it and bring up a new one at any time.</p>
<pre><code class="bash">~ $ cd /path/to/CLAW/install
/path/to/CLAW/install $ vagrant destroy
/path/to/CLAW/install $ vagrant up
</code></pre>

<h2 id="logging-in-to-your-development-environment">Logging in to your development environment</h2>
<p>You can ssh into your development environment at any time by doing the following:</p>
<pre><code class="bash">~ $ cd /path/to/islandora/install
/path/to/islandora/install $ vagrant ssh
Welcome to Ubuntu 14.04.2 LTS (GNU/Linux 3.13.0-45-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

 System information disabled due to load higher than 1.0

  Get cloud support with Ubuntu Advantage Cloud Guest:
    http://www.ubuntu.com/business/services/cloud


Last login: Fri Jul 17 13:51:38 2015 from 10.0.2.2
vagrant@islandora:~$
</code></pre>

<p>You'll be logged in as the vagrant user, with your github repo in your home directory.</p>
<h2 id="port-forwarding">Port Forwarding</h2>
<p>Many ports are forwarded from your virtual machine to your personal computer, so care must be taken that there are no conflicts. Here's a list of all the ports that get forwarded:
- Apache: 80 -&gt; 8000
- Tomcat: 8080 -&gt; 8080
- Karaf: 8181 -&gt; 8181
- MySQL: 3306 -&gt; 3306</p>
<p>At any point in time, you can edit how the ports are forwarded by clicking on the Port Forwarding button in your virtual machine's Network settings in Virtualbox.</p>
<p>You can also edit the section of the Vagrantfile that controls the default port forwarding, which looks something like this:</p>
<pre><code class="ruby">  config.vm.network :forwarded_port, guest: 8080, host: 8080 # Tomcat
  config.vm.network :forwarded_port, guest: 8181, host: 8181 # Karaf
  config.vm.network :forwarded_port, guest: 3306, host: 3306 # MySQL
  config.vm.network :forwarded_port, guest: 5432, host: 5432 # PostgreSQL
  config.vm.network :forwarded_port, guest: 80, host: 8000 # Apache
</code></pre>

<h2 id="important-locations">Important locations</h2>
<ul>
<li>Drupal: <code>/var/www/html/drupal</code></li>
<li>Apache Logs: <code>/var/log/apache2/error.log</code></li>
<li>Tomcat: <code>/var/lib/tomcat7</code><ul>
<li>Logs: <code>/var/log/tomcat7</code></li>
<li>Fedora 4: <code>/var/lib/tomcat7/webapps/fcrepo</code></li>
<li>Solr: <code>/var/lib/tomcat7/webapps/solr</code></li>
<li>BlazeGraph: <code>/var/lib/tomcat7/webapps/bigdata</code></li>
<li>FcrepoCamelToolbox: <code>/var/lib/tomcat7/webapps/fcrepo-camel-toolbox</code></li>
</ul>
</li>
<li>Karaf: <code>/opt/karaf</code><ul>
<li>Logs: <code>/opt/karaf/data/log</code></li>
<li>Configuration: <code>/opt/karaf/etc</code></li>
</ul>
</li>
<li>CLAW: <code>/home/vagrant/CLAW</code></li>
</ul>
<h2 id="shared-folders">Shared folders</h2>
<p>By default, the vagrant environment uses a shared folder between your computer and the virtual machine it has created. This folder points to your Islandora CLAW github repo on your computer and is available at <code>~/CLAW</code> (<code>/home/vagrant/CLAW</code>) on the virtual machine. On top of that, in Drupal, <code>sites/all/modules/islandora</code> is a symlink pointing to <code>~/CLAW/islandora</code>.  This has a few profound consequences:</p>
<ul>
<li>You can use the IDE you're comfortable with on your own machine, without the need to scp/rsync code over to the development environment</li>
<li>Changes to Drupal module code are automatically reflected on your Drupal site since that code is symlinked (although you may need to be ssh'd in to <code>drush cc all</code> on occassion)</li>
<li>When testing the Vagrant install after adding changes, the code from your fork and your branch on your computer is used to generate the virtual machine</li>
</ul>
<h2 id="compiling-camel-bundles">Compiling Camel Bundles</h2>
<p>Despite being nothing but Blueprint xml files, Camel projects still have to be compiled using Maven. The <code>install</code> directive is the default, so all one has to do is navigate to the appropriate directory and issue a <code>mvn</code> in the command line.  For example, to compile the collection service:</p>
<pre><code class="bash">~ $ cd /path/to/CLAW/Alpaca/services/collection-service
/path/to/CLAW/Alpaca/serices/collection-service $ mvn
</code></pre>

<p>The only caveat here is that this is best done on the virtual machine itself. While your virtual machine was being built, it's Karaf installation was set to monitor the vagrant user's Maven repository for changes, and autodeploy in response to <code>mvn install</code>. So while you can always run Maven from your own machine, it will get installed in your personal Maven repository on your machine. So to take advantage of the auto-redeploy capabilities of Karaf, you need to do this as the vagrant user.</p>
<p>If for any reason, you have to shutdown or restart Karaf, it will cease to monitor the vagrant user's Maven repository. In order to turn this back on, you'll have to issue the appropriate commands to get monitoring working again. The easiest way to do this is to re-run the karaf script the install process uses to set up monitoring by executing <code>/opt/karaf/bin/client &lt; ~/islandora/install/karaf/monitor.script</code>.</p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../committers/" title="Committers">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Committers
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../../migration/migration/" title="Migration">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Migration
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = 'kimpham54/CLAW';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>